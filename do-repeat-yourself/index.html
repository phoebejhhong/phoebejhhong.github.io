<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.33e1915afb84bdd5cf7d.css">.header-module--title--2iLmX{text-align:center;font-size:2rem}.header-module--badge--1kF3j{background:#fff;padding:.5rem;position:absolute;text-transform:uppercase;border:2px solid #000}.header-module--badgeTop--ZSOhO{left:30%;top:4rem}.header-module--badgeBottom--3_dRK{right:30%;top:9.5rem}@media(min-width:480px){.header-module--title--2iLmX{font-size:3rem}.header-module--badgeTop--ZSOhO{top:4.5rem}.header-module--badgeBottom--3_dRK{top:10rem}}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects;color:#019d93}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}kbd,samp{font-family:monospace,monospace;font-size:1em;margin-bottom:1rem}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:roboto,georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-family:EB Garamond,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p,table{padding:0;margin:0 0 1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}tt:after,tt:before{letter-spacing:-.2em;content:" "}pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.post-module--titleWrapper--BV9Ay{margin-bottom:2rem}.post-module--title--37tBS{color:#000;text-decoration:none;display:inline;margin-right:1rem}.post-module--title--37tBS:hover{text-decoration:underline}.post-module--title--37tBS h1{display:inline}.post-module--date--1g0_w{color:#868e96}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.2em;border-radius:.3em;white-space:normal;background-color:#fbf2e9;color:#6f8f39;font-size:.825rem}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.12.0"/><title data-react-helmet="true">A simple case for Do Repeat Yourself | Phoebe Hong</title><meta data-react-helmet="true" name="description" content="phoebehong.com"/><meta data-react-helmet="true" property="og:title" content="A simple case for Do Repeat Yourself"/><meta data-react-helmet="true" property="og:description" content="phoebehong.com"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@phoebejhhong"/><meta data-react-helmet="true" name="twitter:title" content="A simple case for Do Repeat Yourself"/><meta data-react-helmet="true" name="twitter:description" content="phoebehong.com"/><meta data-react-helmet="true" name="keywords" content="development"/><link as="script" rel="preload" href="/1-fd56e2995630b199325f.js"/><link as="script" rel="preload" href="/component---src-components-post-page-js-8a507eb6a2777634b6b4.js"/><link as="script" rel="preload" href="/app-f784d24022deac9a0b44.js"/><link as="script" rel="preload" href="/styles-e033651e0095311a8aa2.js"/><link as="script" rel="preload" href="/webpack-runtime-5edd659d67f2cda57340.js"/><link as="fetch" rel="preload" href="/page-data/do-repeat-yourself/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><link href="https://fonts.googleapis.com/css?family=EB+Garamond:400,700|Roboto:400,700" rel="stylesheet"/><header style="background:radial-gradient(ellipse at bottom left, #019D93, transparent),
        radial-gradient(ellipse at top left, #E863A2, transparent),
        radial-gradient(ellipse at top right, #F89B60, transparent),
        radial-gradient(ellipse at bottom right, #1885D8, transparent);background-size:100% 15rem;background-color:white;margin-bottom:1.45rem;height:15rem"><div style="margin:0 auto;padding:7rem 0 4rem 0"><span class="header-module--badge--1kF3j header-module--badgeTop--ZSOhO"><span role="img" aria-label="wave">👋</span> welcome to</span><h1 class="header-module--title--2iLmX"><a style="color:black;text-decoration:none;padding:0.5rem 1rem;border:2px solid black;box-shadow:4px 4px black;font-style:italic;text-transform:uppercase;font-family:roboto" href="/">Phoebe Hong</a></h1><span class="header-module--badge--1kF3j header-module--badgeBottom--3_dRK">&#x27;s website <span role="img" aria-label="home">🏡</span></span></div></header><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><main><div class="post-module--titleWrapper--BV9Ay"><a class="post-module--title--37tBS" href="/do-repeat-yourself"><h1>A simple case for Do Repeat Yourself</h1></a><span class="post-module--date--1g0_w">2019-07</span></div><div><p> The other day, I wrote a piece of code that went like this:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">{</span>panelType <span class="token operator">===</span> <span class="token string">"A"</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PanelA</span></span> <span class="token attr-name">someProp</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>someProp<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>panelType <span class="token operator">===</span> <span class="token string">"B"</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PanelB</span></span> <span class="token attr-name">someProp</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>someProp<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>panelType <span class="token operator">===</span> <span class="token string">"C"</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PanelC</span></span> <span class="token attr-name">someProp</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>someProp<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></code></pre></div>
<br />
<p>And it was just ✨liberating✨</p>
<p>"Don't repeat yourself" was one of the first software development principles I've ever learned. (Who didn't?) And it took me considerable time and lots of frustration at prematurely abstracted code until I unlearned the dogma. The day I rage-googled and stumbled upon <a href="https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction" target="_blank" rel="nofollow noopener noreferrer">duplication is far cheaper than the wrong abstraction</a>, I was born again as an appreciator of the beauty of simplicity and straightforwardness.</p>
<p>Say, for some reason, I "refactored" the code to look like this:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> panelTypeComponentMap <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"A"</span><span class="token punctuation">:</span> PanelA<span class="token punctuation">,</span>
  <span class="token string">"B"</span><span class="token punctuation">:</span> PanelB<span class="token punctuation">,</span>
  <span class="token string">"C"</span><span class="token punctuation">:</span> PanelC<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> PanelComponent <span class="token operator">=</span> panelTypeComponentMap<span class="token punctuation">[</span>panelType<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PanelComponent</span></span> <span class="token attr-name">someProp</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>someProp<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span></code></pre></div>
<br />
<p>❌ Things the "refactor" didn't do:</p>
<ul>
<li>It didn't make code less bug-prone</li>
</ul>
<p>Because the new code looks more organized, it might give you (false) sense of security. Still, any mistake you can make in the previous code, can be made in the latter code in the same manner.</p>
<ul>
<li>It didn't make code easier to change</li>
</ul>
<p>It doesn't particularly reduce the amount of effort needed to do something as simple as adding <code class="language-text">PanelD</code> or removing <code class="language-text">PanelB</code>. In a case a future design change requires passing different props to different panels, however, you can imagine how much more configuration we have to add in the latter code, whereas in the former, to put it in a very technically accurate term, it'd be super easy.</p>
<p>✅ Things the "refactor" did do:</p>
<ul>
<li>It made code longer</li>
<li>It made code more complex</li>
</ul>
<p> More lines of code means more work. I had to use my brain extra hard to come up with pretty much meaningless variable names like <code class="language-text">panelTypeComponentMap</code> and <code class="language-text">PanelComponent</code>. Imagine the toll on the future readers of the code, learning more <em>stuff</em>, jumping around the code because most likely <code class="language-text">panelTypeComponentMap</code> is defined on the top of the file or, even worse, in a different file.</p>
<p> More lines of code is bad, and to justify it, there has to be real good explicit benefit to cancel out its badness.</p>
<p>This is a very simple example, but the whole point is to spare writer and reader's effort with something small like this so that they can focus on more important matter. Principle here is simple. Don't fix a problem that does not exist (yet). Write naive code, your many if statements will do just fine. You can fix it later when it becomes a real problem.</p></div></main></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/do-repeat-yourself/";window.webpackCompilationHash="192757e02bc7836572fe";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-f784d24022deac9a0b44.js"],"component---src-components-post-page-js":["/component---src-components-post-page-js-8a507eb6a2777634b6b4.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9c0d7b62aec096511092.js"],"component---src-pages-index-js":["/component---src-pages-index-js-e4de503e4fb21f055d3a.js"]};/*]]>*/</script><script src="/webpack-runtime-5edd659d67f2cda57340.js" async=""></script><script src="/styles-e033651e0095311a8aa2.js" async=""></script><script src="/app-f784d24022deac9a0b44.js" async=""></script><script src="/component---src-components-post-page-js-8a507eb6a2777634b6b4.js" async=""></script><script src="/1-fd56e2995630b199325f.js" async=""></script></body></html>